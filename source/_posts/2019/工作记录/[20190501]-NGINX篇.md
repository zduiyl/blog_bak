##### location匹配优先级
https://blog.csdn.net/qq_15766181/article/details/72829672

匹配顺序
首先精确匹配 =
其次前缀匹配 ^~
其次是按文件中顺序的正则匹配
然后匹配不带任何修饰的前缀匹配。
最后是交给 / 通用匹配
当有匹配成功时候，停止匹配，按当前匹配规则处理请求

---

##### 配置注意事项
https://cloud.tencent.com/developer/ask/54082
https://www.cnblogs.com/netsa/p/6383094.html

一.nginx无法在proxy_pass指令中处理所需的URI部分，因为位于指定的位置（因此是错误消息）。这是因为nginx是以模块化的方式构建的，每个配置块都是由各个模块在各个阶段读取的。所以请记住，proxy_pass在以下情况下，指令中不能有URI ：

1.正则表达式位置
2.命名的地点
3.if 块

* 正则匹配时的特殊字符才需要转义


二.根据url参数location

实际开发中经常有根据请求参数来路由到不同请求处理者的情况，根据POST请求参数需要些nginx插件，这里主要简单介绍下如何根据GET参数来路由。

还是上面的配置文件。比如我们希望访问http://192.168.71.51:6061/do1.aspx?t=1212&c=uplog 当url中的参数c为config或uplog的时候（忽略大小写）我们路由到其他地方：

首先增加一个upstream，比如：

``` nginx
	upstream other {  
	    server 192.168.71.41:2210;	
	}		   
```

然后在location里增加如下的判断即可：

``` nginx
	location / { 
	    if ( $query_string ~* ^(.*)c=config\b|uplog\b(.*)$ ){
	    	proxy_pass    http://other; 
	    }
	}
``` 
